# BlooReview

SaaS review collection platform with automated business registration and review page generation.

## Overview

BlooReview is a multi-tenant review collection platform that automatically generates personalized review pages for businesses. Each business gets its own subdomain (e.g., `joes-pizza.blooreview.app`) with a customized review collection flow.

## Features

- **Automated Business Registration**: Input Google Maps URL and automatically generate review page
- **Multi-Tenant Architecture**: Each business gets its own subdomain and config
- **Review Collection**: 5-star reviews → Google Reviews, 1-4 star reviews → Internal feedback
- **Discount System**: Automated discount code generation for reviewers
- **Social Sharing**: WhatsApp, SMS, and link sharing for referrals
- **Google Sheets Integration**: Review data stored in Google Sheets

## Tech Stack

- **Frontend**: Vanilla JavaScript, HTML, CSS
- **Backend**: Vercel Serverless Functions (Node.js)
- **Storage**: config.js (business configs), Google Sheets (review data)
- **Hosting**: Vercel
- **Domain**: blooreview.app

## Quick Start

### Admin UI

1. Visit `admin.blooreview.app` or `/admin`
2. Input Google Maps URL
3. System automatically:
   - Fetches business details from Maps API
   - Generates slug
   - Creates config
   - Updates config.js
   - Deploys to Vercel
4. Review page is live at `[slug].blooreview.app`

### Environment Variables

Required environment variables in Vercel:

- `GOOGLE_MAPS_API_KEY` - Google Maps API key (required)
- `GITHUB_TOKEN` - GitHub personal access token for updating config files (required)
- `GITHUB_REPO` - GitHub repository in format `owner/repo` (required)
- `REVIEW_SCRIPT_URL` - Google Apps Script URL for review data collection (optional)

## Project Structure

```
/
├── admin/                 # Admin panel
│   ├── index.html        # Admin UI
│   ├── admin.js          # Admin frontend logic
│   └── admin.css         # Admin styles
├── api/                   # API endpoints
│   ├── admin/
│   │   ├── generate.js   # Business generation endpoint
│   │   └── maps.js       # Maps API integration endpoint
│   ├── index.js          # Root handler (Open Graph injection)
│   └── config.json       # Hero image mappings (auto-generated)
├── app.js                 # Review page frontend logic
├── config.js             # Business configs (auto-generated)
├── _index.html           # Review page HTML template
├── styles.css            # Review page styles
├── logo.png              # Logo image
├── logo_title_white.png  # Logo with title
└── vercel.json           # Vercel configuration
```

## Development

### Prerequisites

- Node.js 18+ installed
- npm or yarn package manager
- Google Maps API key
- GitHub personal access token (for admin API)

### Local Development Setup

1. **Install dependencies:**
   ```bash
   npm install
   ```

2. **Set up environment variables:**
   ```bash
   cp .env.example .env.local
   # Then edit .env.local with your actual values
   ```

3. **Start the development server:**
   ```bash
   npm run dev
   ```

The dev server will start at `http://localhost:3000` by default.

**Access URLs:**
- Admin UI: `http://localhost:3000/admin`
- Review pages: `http://localhost:3000/?biz=slug` (use `?biz=slug` query param for testing)

### Environment Variables for Local Development

1. Copy the example environment file:
   ```bash
   cp .env.example .env.local
   ```

2. Edit `.env.local` and add your actual values:
   ```env
   GOOGLE_MAPS_API_KEY=your_google_maps_api_key
   GITHUB_TOKEN=your_github_personal_access_token
   GITHUB_REPO=owner/repo
   REVIEW_SCRIPT_URL=your_google_apps_script_url
   ```

**Note**: 
- Vercel CLI automatically loads `.env.local` file
- `.env.local` is already in `.gitignore` to prevent committing secrets
- For production, set these variables in Vercel dashboard under Project Settings > Environment Variables

### Adding a New Business

1. Use admin UI to input Google Maps URL
2. System automatically generates review page
3. Review page is live at `[slug].blooreview.app`

## Deployment

Deployment is automatic via Vercel:

1. Push to git
2. Vercel automatically deploys
3. Changes are live in 2-3 minutes

## Configuration

Business configs are stored in `config.js` and auto-generated by the admin UI. Each business has:

- `place_id` - Google Places API Place ID
- `name` - Business name
- `category` - Business category
- `google_maps_url` - Google Maps URL
- `hero_image` - Hero image URL
- `discount_enabled` - Enable discount codes
- `discount_percentage` - Discount percentage
- `discount_valid_days` - Discount validity period
- `referral_enabled` - Enable referral sharing
- `min_review` - Minimum review threshold (5 stars)
- `sheet_script_url` - Google Sheets script URL for review data

## Review Data Collection

Review data is stored in Google Sheets via `sheet_script_url`. Each business's reviews are stored in separate sheets.

## License

Private - All rights reserved

## Support

For issues or questions, please contact the development team.

