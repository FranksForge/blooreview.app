<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - Generate Review Page | BlooReview</title>
  <link rel="stylesheet" href="/admin/admin.css">
  <link rel="icon" type="image/png" href="/logo.png" />
</head>
<body>
  <main class="admin-container">
    <header class="admin-header">
      <h1>BlooReview Admin</h1>
      <p class="admin-subtitle">Generate review pages for businesses</p>
    </header>

    <form id="generate-form" class="admin-form">
      <div class="form-group">
        <label for="maps-url" class="form-label">
          Google Maps URL
        </label>
        <input 
          type="url" 
          id="maps-url" 
          name="maps-url"
          class="form-input"
          placeholder="https://www.google.com/maps/place/..." 
          required
        />
        <p class="form-help">Paste the Google Maps URL of the business</p>
      </div>

      <button type="button" id="fetch-details-btn" class="btn btn-primary">
        Fetch Details
      </button>

      <div id="business-details" class="business-details hidden">
        <h2>Business Details</h2>
        <div id="details-content" class="details-content">
          <!-- Business details will be displayed here -->
        </div>
        
        <div class="form-actions">
          <button type="submit" id="generate-btn" class="btn btn-success">
            Generate Review Page
          </button>
          <button type="button" id="reset-btn" class="btn btn-secondary">
            Start Over
          </button>
        </div>
      </div>

      <div id="status-message" class="status-message"></div>
    </form>

    <div id="success-view" class="success-view hidden">
      <div class="success-icon">âœ…</div>
      <h2>Your page is ready!</h2>
      <p class="success-message">Your review page will be live in about 2 minutes. Here is your link and QR code to share:</p>
      
      <div class="success-link-section">
        <label class="success-link-label">Review Page URL:</label>
        <div class="success-link-container">
          <input type="text" id="success-review-url" class="success-link-input" readonly />
          <button type="button" id="copy-success-url-btn" class="btn btn-secondary btn-small">Copy</button>
        </div>
        <a id="open-review-link" href="#" target="_blank" rel="noopener" class="btn btn-primary">Open Review Page</a>
      </div>

      <div class="success-qr-section">
        <h3>QR Code</h3>
        <p class="qr-code-description">Scan this QR code to access the review page, or download it to print or display.</p>
        <div class="qr-code-container">
          <canvas id="qr-code-canvas"></canvas>
        </div>
        <button type="button" id="download-qr-btn" class="btn btn-primary">Download QR Code</button>
      </div>

      <div class="success-actions">
        <button type="button" id="create-another-btn" class="btn btn-secondary">Create Another Page</button>
      </div>
    </div>

    <div id="loading" class="loading hidden">
      <div class="spinner"></div>
      <p>Processing...</p>
    </div>
  </main>

  <script src="/admin/admin.js"></script>
</body>
</html>

